# Telegram Bot —Å Mini App –¥–ª—è Posiflora

Telegram-–±–æ—Ç —Å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å–∏—Å—Ç–µ–º—ã —É—á—ë—Ç–∞ Posiflora.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [**STRUCTURE.md**](STRUCTURE.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [**MATERIALS_REQUEST.md**](MATERIALS_REQUEST.md) - –°–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —É –ó–∞–∫–∞–∑—á–∏–∫–∞
- [**POSIFLORA_API_REQUIREMENTS.md**](POSIFLORA_API_REQUIREMENTS.md) - –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–∞–Ω–Ω—ã–º –∏ –º–µ—Ç–æ–¥–∞–º Posiflora API

## üéØ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- üì± Telegram Mini App (WebApp)
- üõí –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫–æ—Ä–∑–∏–Ω–æ–π
- üì¶ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ (–¥–æ—Å—Ç–∞–≤–∫–∞ –∏ —Å–∞–º–æ–≤—ã–≤–æ–∑)
- üí∞ –°–∏—Å—Ç–µ–º–∞ –±–æ–Ω—É—Å–æ–≤
- üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Posiflora
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
- ‚ÑπÔ∏è –†–∞–∑–¥–µ–ª "–û –Ω–∞—Å"

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- Node.js 20+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ Docker)
- PostgreSQL –∏ Redis (–µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –±–µ–∑ Docker)

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**

   –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:
   ```bash
   cp .env.example .env
   ```

   –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ —É–∫–∞–∂–∏—Ç–µ:
   - `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram –±–æ—Ç–∞ (—É–∂–µ —É–∫–∞–∑–∞–Ω)
   - `WEBAPP_URL` - URL –≤–∞—à–µ–≥–æ Mini App (–¥–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω)
   - `API_URL` - URL –≤–∞—à–µ–≥–æ API (–¥–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω)

2. **–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤**

   ```bash
   docker-compose up -d
   ```

   –≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç:
   - PostgreSQL (–ø–æ—Ä—Ç 5432)
   - Redis (–ø–æ—Ä—Ç 6379)
   - Backend API (–ø–æ—Ä—Ç 3000)
   - Frontend Mini App (–ø–æ—Ä—Ç 5173)

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã**

   - Backend API: http://localhost:3000/health
   - Frontend: http://localhost:5173
   - Telegram Bot: –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –≤–∞—à–µ–º—É –±–æ—Ç—É

4. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞**

   ```bash
   docker-compose down
   ```

5. **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤**

   ```bash
   # –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
   docker-compose logs -f

   # –¢–æ–ª—å–∫–æ backend
   docker-compose logs -f backend

   # –¢–æ–ª—å–∫–æ frontend
   docker-compose logs -f frontend
   ```

### –ó–∞–ø—É—Å–∫ –±–µ–∑ Docker (–ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

   ```bash
   # Backend
   cd backend
   npm install

   # Frontend
   cd frontend
   npm install
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∏ Redis –∑–∞–ø—É—â–µ–Ω—ã:
   ```bash
   # PostgreSQL
   createdb chvetyk_db

   # Redis (–æ–±—ã—á–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
   redis-server
   ```

3. **–ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î** (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

   ```bash
   cd backend
   npm run migrate
   ```

4. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤**

   ```bash
   # Terminal 1 - Backend
   cd backend
   npm run dev

   # Terminal 2 - Frontend
   cd frontend
   npm run dev
   ```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

1. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç [@BotFather](https://t.me/BotFather)
2. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env` —Ñ–∞–π–ª
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ WebApp URL –≤ BotFather:
   ```
   /setmenubutton
   –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
   –í–≤–µ–¥–∏—Ç–µ URL –≤–∞—à–µ–≥–æ Mini App: https://your-domain.com
   ```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
TG_BOT_Chvetyk/
‚îú‚îÄ‚îÄ backend/          # Backend API (Node.js + TypeScript + Express)
‚îú‚îÄ‚îÄ frontend/         # Mini App (React + TypeScript + Vite)
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ README.md
```

### –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç Posiflora

1. **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** (`backend/src/integrations/posiflora/`)
   - –î–æ–±–∞–≤–∏—Ç—å URL –∏ –∫–ª—é—á API –≤ `.env`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

2. **–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å Posiflora
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Ç–æ–≤–∞—Ä–æ–≤

3. **–ó–∞–∫–∞–∑—ã**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –≤ Posiflora
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤

4. **–ë–æ–Ω—É—Å—ã**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –±–æ–Ω—É—Å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π Posiflora
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å—á—ë—Ç –∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤

5. **–î–æ—Å—Ç–∞–≤–∫–∞**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫–∏ —Å–∞–º–æ–≤—ã–≤–æ–∑–∞

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [MATERIALS_REQUEST.md](MATERIALS_REQUEST.md) –∏ [POSIFLORA_API_REQUIREMENTS.md](POSIFLORA_API_REQUIREMENTS.md)

## üìã –†–µ—Ñ–µ—Ä–µ–Ω—Å—ã

–ë–æ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ—Ç–æ—Ä—ã—Ö –¥–µ–ª–∞–µ—Ç—Å—è –ø—Ä–æ–µ–∫—Ç:
- @cvetochnyj21_bot
- @BunchMskBot
- @lllllllllmbot (—Ç–µ–∫—É—â–∏–π –±–æ—Ç)

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–°–º. [QUICK_START.md](QUICK_START.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –∑–∞–ø—É—Å–∫—É.

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Telegram Bot API](https://core.telegram.org/bots/api)
- [Telegram Mini Apps](https://core.telegram.org/bots/webapps)
- [Posiflora API](https://posiflora.ru) (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—Ç –∑–∞–∫–∞–∑—á–∏–∫–∞)

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é –æ—Ç –ó–∞–∫–∞–∑—á–∏–∫–∞.
